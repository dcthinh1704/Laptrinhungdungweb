<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../assests/css/reset.css" />
    <link rel="stylesheet" href="../assests/css/style.css" />
    <link rel="stylesheet" href="../assests/css/responsive-mobile.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha384-X6d13e5gKALF2DI8z5/jFfkhpk11lK5vdOB67HquyKbSrLp04I0ypSNf/JFF6Ds3"
      crossorigin="anonymous"
    />
    <link href='https://fonts.googleapis.com/css?family=Lily Script One' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <title>Open U</title>
    <style></style>
  </head>
  <body class="scrollbar">
    <!-- Header -->
    <header class="header fixed">

      <div class="content">
        <div class="name-web">
          <h1 class="name-web-details">OpenU</h1>
        </div>
        <div class="body">
          <!-- Nav -->
          <nav id="mobile-navbar" class="navbar">
            <ul class="navbar_items">
              <li class="active nav_home">
                <a href="{{ url_for('home')}}" title="Home"><i class="fas fa-home"></i></a>
              </li>
              <li>
                <a href="#" onclick="focusInput()" title="Search" id="nav-search" class="nav_search"><i class="fas fa-search"></i></a>
              </li>
              <li>
                <a href="#blog" title="Blog" id="nav-post" class="nav_edit"><i class="fas fa-edit"></i></a>
              </li>
              <li>
                <a
                  href="#notification"
                  title="Notification"
                  class="nav_noti"
                  ><i class="fas fa-bell nav_noti_icon"></i>
                  <span class="badge">12</span></a
                >
              </li>
              <li>
                <a href="/chat" title="Message" class="nav_mess"
                  ><i class="fas fa-envelope"></i>
                  <span class="badge">3</span></a
                >
              </li>
            </ul>
            <div class="navbar_items_v2 navbar-bottom">
              <div class="nav-bottom">
                <div id="mobile-menu" class="nav_menu">
                  <i class="fas fa-bars"></i>
                </div>
                <ul class="nav-menu-items">
              <li>
                <a href="{{ url_for('profile')}}" title="Profile"><i class="fas fa-user"></i></a>
              </li>
              <li>
                <a href="{{ url_for('settings') }}" title="Settings"><i class="fa-solid fa-gear setting"></i
                ></a>
              </li>
              <li>
                <a href="{{ url_for('logout') }}" title="Logout"><i class="fa-solid fa-right-from-bracket" style="font-size:18px"></i></i
                ></a>
              </li>
            </ul>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!-- Notifications -->
    <div class="notifications">
      <!-- Your notifications content goes here -->
    </div>
    <div class="background"></div>
    <main class="blog-container">
      <!-- Blog-home area -->
      <section class="home-page ">
        <div class="post-items container">
          <main class="">
            <!-- Blog-home area -->
            <section class="home-page">
                <div class="post-items ">
                    {% for title, content in blog_info %}
                    <article class="post card-border" id="post-{{ loop.index }}">
                        <header class="post-header text-center">
                            <a class="post-title" href="/blog/{{ title|urlencode }}">{{ title }}</a>
                            <!-- desc post item -->
                            <div class="post-meta">
                        <div class="post-meta-detail post-meta-detail-time">
                          <i class="fa-sharp fa-regular fa-clock"></i>
                          <time title=" 2022-4-10 18:02:30 |  2023-2-13 18:07:46"
                            >2022-4-10 18:02
                          </time>
                        </div>
                        <div class="post-meta-devide">|</div>
                        <div class="post-meta-detail post-meta-detail-views">
                          <i class="fa fa-eye" aria-hidden="true"></i> 3,422
                        </div>
                        <br />
                        <div class="post-meta-detail post-meta-detail-words">
                          <i class="fa-regular fa-file-word"></i><span title=" 785 "> 3523</span>
                        </div>
                        <div class="post-meta-devide">|</div>
                        <div class="post-meta-detail post-meta-detail-words">
                          <i class="fa fa-hourglass-end" aria-hidden="true"></i>
                          51
                        </div>
                      </div>
                        </header>
        
                        <div class="post-content">{{ content }}</div>
        
                        <!-- Icon react -->
                        <div class="post-redirect-btn">
                            <div class="post-tags">
                                <i class="fa fa-tags" aria-hidden="true"></i>
                                <a href="#" class="tag badge hover">Blog</a>
                            </div>
                            <a class="view-blog hover" href="/blog/{{ title|urlencode }}">View</a>
                        </div>
                    </article>
                    {% endfor %}
                </div>
            </section>
      </section>

      


      <!-- Blog-create -->
      <section id="mobile-post" class="blog-page none">
        <div class="create-blog-container container-v2">
          <!-- Item 1 -->
          <div class="create-blog card-border">
            <header class="create-post-header text-center">
              <div class="mobile-post-close none">
                <button onclick="closePost()" type="button">Close</button>
              </div>
              <a class="create-post-title" href="https://goodapple.top/archives/1145"
                >Create your own post</a
              >
            </header>
            <div class="create-title">
          
              <label for="title">Title</label>

              <input class="title-blog" type="text" id="blog-title" style="display: block;
              padding: 5px 10px 5px 5px;
              margin-bottom: 10px;
              width: 284px;
              height: 37px;
              line-height: 1.3;">
            </div>
            <span class="content" style="color: #39ac91;font-size: 25px;display: inline-block;margin-bottom:20px">Content</span>
            <textarea class="create-content">

            </textarea>
          
            <!-- Icon react -->
            <div class="post-redirect-btn">
              <div class="post-tags">
                <a href="#"  class="tag add-tag-badge hover">Add tag <i class="fa fa-tags" aria-hidden="true"></i></a>
              

                <a href="#" id="createButton" class="tag badge hover">Create</a>
              
              </div>
              <a class="view-blog hover" href="#">View</a>
            </div>
          </div>
        </div>
      </section>


        
      <!-- Profile -->
      <section class="section-profile">
        <aside id = "mobile-search" class="blog-user-info">
          <div class="right-side1">
            <div class="rs-desc-pro">
              <div class="mobile-search-close none">
                <button onclick="closeSearch()" type="button">Close</button>
              </div>
              <div class="rs-banner">
                <span>OpenU Blog</span>
              </div>
              <span class="rs1-desc"
                >Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                Commodi excepturi accusanti</span
              >
            </div>
            <div class="rs-search">
              <label for="search-val"
                ><i class="menu-item-icon fa fa-search mr-0"></i
              ></label>
              <input
                class="input-search"
                onclick="focusInput()"
                type="text"
                id="search-val"
                name="search-val"
                placeholder="Search title"
                data-search
              /><br />
            </div>
          </div>
          <div class="right-side-2">
            <div class="rs2-container">
              <div>
                <div class="rs2-nav">
                  <p class="nav-underline">Info</p>
                  <p>Desc</p>
                </ul>
              </div>
              <div class="rs2-profile">
                <div class="rs2-pro-img"></div>
                {% if profile_pic %}
                <style>
                 .rs2-pro-img {
                       background-image: url("../assests/static{{ url_for('static', filename='../users_uploads/' + profile_pic) }}");
                  }
                </style>
                 {% endif %} 
                <div class="rs2-pro-name">{{user_info[0]}}</div>
                <!-- List info -->
                <div class="rs2-info-list">
                  <p class="rs2-pro-role">Role
                    Admin</p>
                  <p class="rs2-pr-age">Age
                    20</p>
                  <p class="rs2-pr-job">Job
                    Stu</p>
                </div>
              </div>
            </div>
          </div>
        </aside>
        <!-- Notification -->
        <aside id="mobile-noti" class="notification none">
          <div class="noti-container">
            <div class="noti-header">
              <div class="noti-banner">
                <div class="mobile-post-close none">
                  <button onclick="closeNotification()" type="button">Close</button>
                </div>
                <span>Notification</span>
              </div>
              <span class="noti-desc"
                >Let's check out what's new</span
              >
            </div>
            <div class="noti-items">
              <!-- noti1 -->
              <div class="noti-item">
                <div class="noti-ava">
                </div>
                <div class="noti-content"> Lorem ipsum dolor sit amet consectetur, djklsajdlasjdlksajdlsa.</div>
              </div>
              <hr>
              <!-- noti2 -->
              <div class="noti-item">
                <div class="noti-ava">
                </div>
                <div class="noti-content"> Lorem ipsum dolor sit amet consectetur, djklsajdlasjdlksajdlsa.</div>
              </div>
              <hr>
              <!-- noti3 -->
              <div class="noti-item">
                <div class="noti-ava">
                </div>
                <div class="noti-content"> Lorem ipsum dolor sit amet consectetur, djklsajdlasjdlksajdlsa.</div>
              </div>
              <hr>
              <!-- noti4 -->
              <div class="noti-item">
                <div class="noti-ava">
                </div>
                <div class="noti-content"> Lorem ipsum dolor sit amet consectetur, djklsajdlasjdlksajdlsa.</div>
              </div>
            </div>
          </div>
        </aside>
      </section>
    </main>
    <div id="toast"></div>
    <!-- Font Awesome Icons (You can include this from a CDN) -->
    <script
      src="https://kit.fontawesome.com/c9f23d41c7.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script>
    <script src="./../assests/js/index.js"></script>
    <script src="../assests/js/responsive-mobile.js"></script>
    <!-- Search function -->
    <script >
      var list_blog = [
     {% for item in blog_info %}
     {
         "title": {{item[0]|tojson}},
         "content": {{item[1]|tojson}}
     }{% if not loop.last %},{% endif %}
     {% endfor %}
     ];
     //list_blog.forEach(blog =>{ alert(blog['title'])})

     </script>
     

    <script >
    const articleElement = document.createElement("article");
    articleElement.classList.add("post", "card-border");
    articleElement.id = "post-1";

    const headerElement = document.createElement("header");
    headerElement.classList.add("post-header", "text-center");

    const titleLinkElement = document.createElement("a");
    titleLinkElement.classList.add("post-title");
    titleLinkElement.textContent = "tesssssssssssssssssssssttttt";

    const postMetaElement = document.createElement("div");
    postMetaElement.classList.add("post-meta");

    headerElement.appendChild(titleLinkElement);
    headerElement.appendChild(postMetaElement);
    articleElement.appendChild(headerElement);
    
    document.querySelector(".post-items").appendChild(articleElement);
    articleElement.classList.add('none')
    // Search logic
      var searchInput = document.querySelector("[data-search]")
      searchInput.addEventListener("input", e => {
        var isVisible = false
        const value = e.target.value.toLowerCase()
        list_blog.forEach(blog => {
          isVisible =
            blog.title.toLowerCase().includes(value) 
            title = blog.title
            const link = document.querySelector(`[href="/blog/${title}"]`);
            const parentNode = link.parentNode.parentNode;
            parentNode.classList.toggle("none", !isVisible)
        })
     })
     
     </script>
    <script>
      function toggleNotifications() {
        const notifications = document.querySelector(".notifications");
        notifications.style.display =
          notifications.style.display === "block" ? "none" : "block";
      }
    </script>
    <script>
      var navbar = document.getElementById('mobile-navbar');
      var moblieMenu = document.getElementById('mobile-menu');
      moblieMenu.onclick = function(){
        var isClosed = navbar.style.overflow === 'hidden';
        if (isClosed){
          navbar.style.overflow = 'initial';
        } else{
          navbar.style.overflow = 'hidden';
        }
      }
    </script>
    <script>
      function closePost() {
        var post = document.getElementById('mobile-post');
        var isOpened = post.style.display !== 'none';
        if (isOpened){
          post.style.display = 'none';
        }
      }
    </script>
    <script>
      function closeNotification() {
        var noti = document.getElementById('mobile-noti');
        var isOpened = noti.style.display !== 'none';
        if (isOpened){
          noti.style.display = 'none';
        }
      }
    </script>
    <script>
      function closeSearch() {
        var search = document.getElementById('mobile-search');
        var computedStyle = window.getComputedStyle(search);
        var zIndex = parseInt(computedStyle.getPropertyValue('z-index'));
        if(zIndex === 10){
            search.style.zIndex = '-10'; // Đóng cửa sổ tìm kiếm
        }
    }
    </script>
  </body>
</html>
